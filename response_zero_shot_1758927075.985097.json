{
  "strategy": "zero_shot",
  "prompt_prefix": "-- Enable foreign keys\nPRAGMA foreign_keys = ON;\n\n-- Address table\nCREATE TABLE address (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    street TEXT NOT NULL,\n    city TEXT NOT NULL,\n    state TEXT NOT NULL,\n    zip_code TEXT NOT NULL  -- ZIPs may have leading 0s\n);\n\n-- Runner table\nCREATE TABLE runner (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    first_name TEXT NOT NULL,\n    last_name TEXT NOT NULL,\n    phone_number TEXT NOT NULL, -- Use TEXT to preserve formatting/leading zeros\n    age INTEGER NOT NULL,\n    gender TEXT NOT NULL CHECK (gender IN ('Male', 'Female')),\n    address_id INTEGER NOT NULL,\n    FOREIGN KEY (address_id) REFERENCES address(id)\n);\n\n-- Race table\nCREATE TABLE race (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name VARCHAR(30) NOT NULL,\n    distance INTEGER NOT NULL,\n    date DATE NOT NULL,\n    elevation INTEGER NOT NULL,\n    address_id INTEGER NOT NULL,\n    FOREIGN KEY (address_id) REFERENCES address(id)\n);\n\n-- Registration table\nCREATE TABLE registration (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    runner_id INTEGER NOT NULL,\n    race_id INTEGER NOT NULL,\n    date DATE NOT NULL,\n    FOREIGN KEY (runner_id) REFERENCES runner(id),\n    FOREIGN KEY (race_id) REFERENCES race(id)\n);\n\n-- Shoe table\nCREATE TABLE shoe (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    runner_id INTEGER NOT NULL,\n    brand TEXT NOT NULL,\n    size REAL NOT NULL,  -- SQLite doesn't enforce DECIMAL precision\n    model TEXT NOT NULL,\n    year INTEGER NOT NULL,\n    purchase_date DATE NOT NULL,\n    FOREIGN KEY (runner_id) REFERENCES runner(id)\n);\n\n-- Race prize table\nCREATE TABLE race_prize (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    race_id INTEGER NOT NULL,\n    first_prize INTEGER NOT NULL,\n    second_prize INTEGER NOT NULL,\n    third_prize INTEGER NOT NULL,\n    FOREIGN KEY (race_id) REFERENCES race(id)\n);\n\n-- Race positions table\nCREATE TABLE race_positions (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    race_id INTEGER NOT NULL,\n    position INTEGER NOT NULL,\n    runner_id INTEGER NOT NULL,\n    race_time TIME NOT NULL,\n    FOREIGN KEY (race_id) REFERENCES race(id),\n    FOREIGN KEY (runner_id) REFERENCES runner(id)\n);\n Give me a sqlite select statement that answers the question. Only respond with sqlite syntax. If there is an error do not explain it!",
  "questionResults": [
    {
      "question": "Who signed up for a race but never ran it?",
      "sql": "\nSELECT ru.first_name, ru.last_name\nFROM registration reg\nLEFT JOIN race_positions rp ON reg.runner_id = rp.runner_id AND reg.race_id = rp.race_id\nJOIN runner ru ON reg.runner_id = ru.id\nWHERE rp.id IS NULL;\n",
      "queryRawResponse": "[('John', 'Doe'), ('John', 'Doe')]",
      "friendlyResponse": "John Doe signed up but never ran the race.",
      "error": "None"
    },
    {
      "question": "What shoe brands do winners wear?",
      "sql": "\nSELECT DISTINCT s.brand\nFROM race_positions rp\nJOIN shoe s ON rp.runner_id = s.runner_id\nWHERE rp.position = 1;\n",
      "queryRawResponse": "[('Nike',), ('Asics',), ('New Balance',)]",
      "friendlyResponse": "Winners often wear Nike, Asics, and New Balance.",
      "error": "None"
    },
    {
      "question": "Who runs with shoes over a year old?",
      "sql": "\nSELECT DISTINCT runner.first_name, runner.last_name \nFROM runner\nJOIN shoe ON runner.id = shoe.runner_id\nWHERE julianday('now') - julianday(shoe.purchase_date) > 365;\n",
      "queryRawResponse": "[('John', 'Doe'), ('Jane', 'Smith'), ('Emily', 'Davis'), ('Robert', 'Brown')]",
      "friendlyResponse": "John, Jane, Emily, and Robert do.",
      "error": "None"
    },
    {
      "question": "Who ran more than one race in a month?",
      "sql": "\nSELECT runner.first_name, runner.last_name\nFROM runner\nJOIN registration ON runner.id = registration.runner_id\nWHERE strftime('%Y-%m', registration.date) IN (\n    SELECT strftime('%Y-%m', date)\n    FROM registration\n    GROUP BY runner_id, strftime('%Y-%m', date)\n    HAVING COUNT(DISTINCT race_id) > 1\n)\nGROUP BY runner.id;\n",
      "queryRawResponse": "[('John', 'Doe'), ('Jane', 'Smith'), ('Mike', 'Johnson'), ('Emily', 'Davis'), ('Robert', 'Brown')]",
      "friendlyResponse": "John Doe, Jane Smith, Mike Johnson, Emily Davis, and Robert Brown all ran more than one race in a month.",
      "error": "None"
    },
    {
      "question": "How long before a race do most people register?",
      "sql": "\nSELECT date - race.date AS days_before_race, COUNT(*) AS num_registrations\nFROM registration\nJOIN race ON registration.race_id = race.id\nGROUP BY days_before_race\nORDER BY num_registrations DESC\nLIMIT 1;\n",
      "queryRawResponse": "[('John', 'Doe'), ('Jane', 'Smith'), ('Mike', 'Johnson'), ('Emily', 'Davis'), ('Robert', 'Brown')]",
      "friendlyResponse": "John Doe, Jane Smith, Mike Johnson, Emily Davis, and Robert Brown all ran more than one race in a month.",
      "error": "ambiguous column name: date"
    },
    {
      "question": "How old are people on average who run races?",
      "sql": "\nSELECT AVG(r.age) AS average_age\nFROM runner r\nJOIN registration reg ON r.id = reg.runner_id;\n",
      "queryRawResponse": "[(30.571428571428573,)]",
      "friendlyResponse": "The average age of people who run races is about 30.",
      "error": "None"
    },
    {
      "question": "How many people are signed up for the next race?",
      "sql": "\nSELECT COUNT(*)\nFROM registration\nWHERE race_id = (\n    SELECT id\n    FROM race\n    WHERE date = (SELECT MIN(date) FROM race WHERE date >= DATE('now'))\n);\n",
      "queryRawResponse": "[(2,)]",
      "friendlyResponse": "2 people are signed up for the next race.",
      "error": "None"
    }
  ]
}